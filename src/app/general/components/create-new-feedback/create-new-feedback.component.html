<div class="container" fxLayoutAlign="center">
  <mat-card fxFlex.gt-md="50%" fxFlex.lt-md="100%" *ngIf="!feedbackSent; else successMessage">
    <mat-card-header>
      <mat-card-title>Feedback zum Thema:<br><br><b>{{ currentTopic.title }}</b></mat-card-title>
      <mat-card-subtitle>Feedback möglich bis <b>{{ currentTopic.feedbackDeadline | date:'short' }}</b></mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div fxLayout="column" fxFlex="100%">
        <div fxLayout="row">
          <div fxLayout="row" fxFlex="100%" style="font-size: 1.1em;" fxLayoutAlign="center">
            <form ngForm="feedbackForm" class="example-form" fxFlex="96%" style="margin-bottom: 20px;">
              <mat-form-field fxFlex="100%">
                <mat-label>Feedback eingeben</mat-label>
                <textarea matInput #message maxlength="2000" placeholder="z. B. Ich finde gut/schlecht, dass..."></textarea>
                <mat-hint align="end">{{ message.value.length }} / 2000 Zeichen</mat-hint>
              </mat-form-field>
            </form>
          </div>
        </div>
        <div fxLayout.gt-md="row" fxLayout.lt-md="column" fxLayoutAlign="space-between" style="padding: 0 2%">
          <button mat-raised-button fxFlex.lt-md="100%" routerLink="/">Abbrechen</button>
          <button mat-raised-button fxFlex.lt-md="100%" color="primary" [disabled]="message.value.length < 10" (click)="sendFeedback(message.value)">Feedback absenden</button>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<ng-template #successMessage>
  <mat-card-content>
    <div fxLayout="column" fxFlex="100%">
      <div fxLayout="row">
        <div fxLayout="row" fxFlex="100%" style="font-size: 1.1em;" fxLayoutAlign="center">
          <h1>Vielen Dank für dein Feedback!</h1>
        </div>
      </div>
    </div>
  </mat-card-content>
</ng-template>
